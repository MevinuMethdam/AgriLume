<!DOCTYPE html>
<html lang="si">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register - Agrilume</title>
    <link rel="stylesheet" href="css/style.css">
    
    <!-- 1. පැරණි platform.js script එක ඉවත් කර, අලුත් GSI script එක මෙතනට දාන්න -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>

</head>
<body>
    <header>
        <h1><a href="index.html">Agrilume</a></h1>
    </header>

    <main class="form-container">
        <h2>Create Your Account</h2>
        <form id="register-form">
            <div class="form-group"><label for="full_name">Full Name</label><input type="text" id="full_name" name="full_name" required></div>
            <div class="form-group"><label for="email">Email Address</label><input type="email" id="email" name="email" required></div>
            <div class="form-group"><label for="phone_number">Phone Number</label><input type="tel" id="phone_number" name="phone_number" required></div>
            <div class="form-group"><label for="address">Address</label><input type="text" id="address" name="address" required></div>
            <div class="form-group"><label for="gender">Gender</label><select id="gender" name="gender" required><option value="">--Choose--</option><option value="Male">Male</option><option value="Female">Female</option></select></div>
            <div class="form-group"><label for="password">Password</label><input type="password" id="password" name="password" required minlength="6"></div>
            <button type="submit">Register</button>
        </form>
        <p id="message-area"></p>

        <div style="text-align: center; margin: 20px 0; color: #777;">OR</div>

        <!-- 2. පැරණි Google Sign-In Button එක වෙනුවට අලුත් ක්‍රමය මෙතනට දාන්න -->
        <div style="display: flex; justify-content: center;">
            <div id="g_id_onload"
                 data-client_id="138005063161-92qou3eaj7netnggmv5t8i9k6vj1gq91.apps.googleusercontent.com"
                 data-context="signup"
                 data-ux_mode="popup"
                 data-callback="handleCredentialResponse"
                 data-auto_prompt="false">
            </div>
            
            <div class="g_id_signin"
                 data-type="standard"
                 data-shape="rectangular"
                 data-theme="outline"
                 data-text="signup_with"
                 data-size="large"
                 data-logo_alignment="left">
            </div>
        </div>

        <p>Already have an account? <a href="login.html">Login here</a></p>
    </main>

    <!-- 3. ලොග් වූ පසු තොරතුරු ලබාගන්නා function එක මෙතනට දාන්න -->
    <script>
        function handleCredentialResponse(response) {
          // Google වෙතින් ලැබෙන token එක මෙයයි.
          // මෙම token එක ඔබගේ server එකට යවා පරිශීලකයා ලියාපදිංචි කරගත හැකියි.
          console.log("Encoded JWT ID token: " + response.credential);
          
          // මෙතනදී ඔබට token එක decode කර පරිශීලකයාගේ නම, email වැනි තොරතුරු ලබාගෙන
          // register form එකේ අදාල තැන් වලට ඇතුලත් කිරීමට හෝ
          // කෙලින්ම ඔබගේ database එකේ ගබඩා කිරීමට හැකියි.
        }
    </script>
    <script src="js/auth.js"></script> <!-- ඔබගේ අනෙකුත් script فایل එක -->
</body>
</html>